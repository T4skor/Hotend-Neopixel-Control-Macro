[neopixel extruder]
pin: #Put the pin of your Neopixel here
initial_RED: 1.0
initial_GREEN: 1.0
initial_BLUE: 1.0

[gcode_macro SET_NEOPIXEL_COLOR]
gcode:
    {% set temperature = printer.extruder.temperature %}
    {% if temperature <= 40 %}
        SET_LED LED=extruder RED=0 GREEN=1 BLUE=0
    {% elif 40 < temperature <= 100 %}
        SET_LED LED=extruder RED=1 GREEN=0 BLUE=1
    {% else %}
        SET_LED LED=extruder RED=1 GREEN=0 BLUE=0
    {% endif %}

[gcode_macro CHECK_HOTEND_TEMPERATURE]
gcode:
    SET_NEOPIXEL_COLOR

[gcode_macro _SET_NEOPIXEL_PRINTING]
gcode:
    SET_LED LED=extruder RED=1 GREEN=1 BLUE=1  

[delayed_gcode CHECK_TEMPERATURE_LOOP]
initial_duration: 5
gcode:
    CHECK_HOTEND_TEMPERATURE
    UPDATE_DELAYED_GCODE ID=CHECK_TEMPERATURE_LOOP DURATION=5

[delayed_gcode PRINTING_LED_LOOP]
initial_duration: 1  
gcode:
    _SET_NEOPIXEL_PRINTING
    UPDATE_DELAYED_GCODE ID=PRINTING_LED_LOOP DURATION=5 
